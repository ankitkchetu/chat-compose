(this.webpackJsonpfinalflow=this.webpackJsonpfinalflow||[]).push([[11],{15:function(e,t,a){"use strict";a.r(t),a.d(t,"EdgeProp",(function(){return b}));var s=a(7),n=a(20),i=a(8),o=a(9),l=a(13),c=a(11),r=a(10),d=a(0),p=a(1),b=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",nameArray:e.nameArray,rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}],theme:"light",language:"javascript",isEditorReady:!1},s.updateText1=s.updateText1.bind(Object(l.a)(s)),s}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.state.element||(this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",nameArray:e.nameArray,rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextProps",e))}},{key:"componentWillUpdate",value:function(e,t){e.element&&this.state.element&&e.element.id!==this.state.element.id&&this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",nameArray:e.nameArray,rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextPropswill",e,t,this.state)}},{key:"handleInputChange",value:function(e,t){var a=e.target,i=a.name,o=a.value,l=Object(n.a)(this.state.rowChip);if(l[t][i]=o,this.setState({rowChip:l}),"suggestionchip"===this.state.element.data.subtype||"carousel"===this.state.element.data.subtype){var c={rowChip:l},r=Object.assign({},this.state.element.data,c);this.setState({element:Object(s.a)(Object(s.a)({},this.state.element),{},{data:Object(s.a)({},r)})})}}},{key:"handleRemoveClick",value:function(e){var t=Object(n.a)(this.state.rowChip);t.splice(e,1),this.setState({rowChip:t})}},{key:"handleAddClick",value:function(){this.setState({rowChip:[].concat(Object(n.a)(this.state.rowChip),[{image:"",text:"",description:""}])})}},{key:"_handleClick",value:function(e){this.setState({clicked:e.target.id})}},{key:"_handleClickClose",value:function(e){console.log("clled"),this.setState({clicked:"dataprop",element:null})}},{key:"handlerChange",value:function(e){if(document.getElementById("propwrap").classList.add("editMark"),"id_label"===e.target.id)this.setState({element:Object(s.a)(Object(s.a)({},this.state.element),{},{label:e.target.value,data:Object(s.a)(Object(s.a)({},this.state.element.data),{},{label:e.target.value})})});else{var t={};"var_name"===e.target.id?t[e.target.id]=e.target.value.toLowerCase().replace(/[^A-Za-z_]+/g,""):t[e.target.id]=e.target.value;var a=Object.assign({},this.state.element.data,t);this.setState({element:Object(s.a)(Object(s.a)({},this.state.element),{},{data:Object(s.a)({},a)})})}}},{key:"updateText1",value:function(e){if(this.state.element){console.log("called"),console.log("inside",this.state.element);var t=this.props.element;console.log("ankit",t.id);var a=this.state.element;this.setState({element:a}),this.state.updateNodeCb(t,a,"node"===t.data.type?0:1)}else console.log("empty",this.props);return this.setState({element:null}),document.getElementById("propwrap").classList.remove("editMark"),!0}},{key:"handleChangeSpace",value:function(e){" "===e.key&&e.preventDefault()}},{key:"handleChange",value:function(e){var t={};if(t[e.target.id]=e.target.value,"subtype"===e.target.id&&"Conditional"===e.target.value&&(console.log("HI"),void 0===this.state.element.data.Comparison_Type)){t=Object(s.a)(Object(s.a)({},t),{Comparison_Type:"==",Slot_Variable:"",label:""})}var a=Object.assign({},this.state.element.data,t);console.log(a),this.setState({element:Object(s.a)(Object(s.a)({},this.state.element),{},{data:Object(s.a)({},a)})})}},{key:"handleEditorDidMount",value:function(){this.setState({isEditorReady:!0})}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{id:"propwrap",className:this.state.element&&this.state.element.data?"itson":"",children:Object(p.jsxs)("div",{id:"properties",className:this.state.element&&this.state.element.data?"expanded":"",children:[Object(p.jsx)("div",{id:"close",onClick:this._handleClickClose.bind(this),children:Object(p.jsx)("img",{src:"assets/close.svg",alt:"close"})}),Object(p.jsx)("p",{id:"header2",children:"Properties"}),Object(p.jsxs)("div",{id:"propswitch",children:[Object(p.jsx)("div",{id:"dataprop",className:"dataprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Data"}),Object(p.jsx)("div",{id:"alertprop",className:"alertprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Alerts"}),Object(p.jsx)("div",{id:"logsprop",className:"logsprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Logs"})]}),Object(p.jsxs)("div",{className:"dataprop"===this.state.clicked?"proplist":"proplist hidden",children:[Object(p.jsx)("p",{className:"inputlabel",children:"Edge Type"}),Object(p.jsxs)("select",{className:"dropme",id:"subtype",value:this.state.element&&this.state.element.data&&this.state.element.data.subtype||"Normal",onChange:this.handleChange.bind(this),children:[Object(p.jsx)("option",{value:"Normal",children:"Normal"}),Object(p.jsx)("option",{value:"Conditional",children:"Conditional"})]}),e.state.element&&e.state.element.data&&"Conditional"===e.state.element.data.subtype?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"inputlabel",children:"Display Name"}),Object(p.jsx)("input",{className:"dropme",id:"id_label",type:"text",value:e.state.element&&e.state.element.data&&e.state.element.data.label||"",onChange:e.handlerChange.bind(e)}),Object(p.jsx)("p",{className:"inputlabel",children:"Slot Variable"}),Object(p.jsx)("input",{className:"dropme",id:"Slot_Variable",type:"text",value:e.state.element&&e.state.element.data&&e.state.element.data.Slot_Variable||"",onChange:e.handlerChange.bind(e)}),Object(p.jsx)("p",{className:"inputlabel",children:"Comparison Type"}),Object(p.jsxs)("select",{className:"dropme",id:"Comparison_Type",value:e.state.element&&e.state.element.data&&e.state.element.data.Comparison_Type||"==",onChange:e.handleChange.bind(e),children:[Object(p.jsx)("option",{value:"<=",children:"<="}),Object(p.jsx)("option",{value:"==",children:"=="}),Object(p.jsx)("option",{value:"!=",children:"!="}),Object(p.jsx)("option",{value:"=>",children:"=>"}),Object(p.jsx)("option",{value:">",children:">"}),Object(p.jsx)("option",{value:"<",children:"<"})]}),Object(p.jsx)("p",{className:"inputlabel",children:"Comparison Value"}),Object(p.jsx)("input",{className:"dropme",id:"Comparison_Value",type:"text",value:e.state.element&&e.state.element.data&&e.state.element.data.Comparison_Value||"",onChange:e.handlerChange.bind(e)})]}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsx)("div",{className:"alertprop"===this.state.clicked?"proplist":"proplist hidden",children:Object(p.jsx)("div",{className:"checkus",children:Object(p.jsx)("p",{children:"Development inprogress"})})}),Object(p.jsx)("div",{className:"logsprop"===this.state.clicked?"proplist":"proplist hidden",children:Object(p.jsx)("div",{className:"checkus",children:Object(p.jsx)("p",{children:"Development inprogress"})})}),Object(p.jsx)("div",{id:"divisionthing"}),Object(p.jsx)("div",{id:"Saveblock",onClick:this.updateText1.bind(this),children:"Save"})]})})}}]),a}(d.Component);t.default=b},45:function(e,t,a){},49:function(e,t,a){var s={"./edge":[15],"./intentedge":[26,0]};function n(e){if(!a.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(n)}))}n.keys=function(){return Object.keys(s)},n.id=49,e.exports=n},50:function(e,t,a){var s={"./apicalling":[31,1],"./apicalling.js":[31,1],"./carousel":[32,2],"./carousel.js":[32,2],"./closenode":[33,3],"./closenode.js":[33,3],"./edge":[15],"./edge.js":[15],"./intentedge":[26,0],"./intentedge.js":[26,0],"./multimedia":[34,4],"./multimedia.js":[34,4],"./scriptnode":[35,5],"./scriptnode.js":[35,5],"./start":[36,6],"./start.js":[36,6],"./suggestionchip":[37,7],"./suggestionchip.js":[37,7],"./text":[38,8],"./text.js":[38,8],"./toagent":[39,9],"./toagent.js":[39,9],"./userinput":[40,10],"./userinput.js":[40,10]};function n(e){if(!a.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(n)}))}n.keys=function(){return Object.keys(s)},n.id=50,e.exports=n},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(14),o=a.n(i),l=(a(45),a(8)),c=a(9),r=a(11),d=a(10),p=a(13),b=a(2),u=a(1),j=function(e){return Object(u.jsx)("div",{className:e.data.class||e.displayColor?e.displayColor:"",children:Object(u.jsxs)("div",{className:"blockyleft",children:[e.data.var_name?null:Object(u.jsx)("img",{src:"assets/errorred.svg",alt:e.data.image,title:"Name is required"}),Object(u.jsx)("img",{src:"assets/".concat(e.data.image.split(".").join("blue.")),alt:e.data.image}),Object(u.jsxs)("p",{className:"blockyname",children:[e.data.label,e.data.var_name&&" ("+e.data.var_name+")"]})]})})},m=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"blockydiv"}),Object(u.jsx)("div",{className:"blockyinfo",children:e.data.description})]})},h=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},g=function(e){var t=e.data,a="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(a="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(a),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},y=function(e){var t=e.data,a="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(a="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(a),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},v=function(e){var t=e.data,a="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(a="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(a),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},O=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},x=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",position:"bottom",style:{borderRadius:0,background:"green"}})]})})},f=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},k=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},C=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(m,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0,background:"green"}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0,background:"red"}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0,background:"red"}})]})})},N=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",position:"top",style:{borderRadius:0,background:"red"}}),Object(u.jsx)(j,{data:t,displayColor:"blockyRed"}),Object(u.jsx)(m,{data:t})]})})},w={selectorText:Object(s.memo)(h),selectorMedia:Object(s.memo)(g),selectorSuggestionChips:Object(s.memo)(y),selectorCarouselChips:Object(s.memo)(v),selectorUserInput:Object(s.memo)(O),selectorNodeStart:Object(s.memo)(x),selectorToAgent:Object(s.memo)(f),selectorApiCalling:Object(s.memo)(k),selectorScriptNode:Object(s.memo)(C),selectorStop:Object(s.memo)(N)},S={send:{title:"Bot Send",elements:[{label:"Text",description:"Send user a text message",nextNodeHints:"Next should be User Input",type:"selectorText",image:"eye.svg",subtype:"text",class:"blockyBlue"},{label:"Multimedia",description:"Send user a multimedia link",nextNodeHints:"Next should be User Input",type:"selectorMedia",image:"database.svg",subtype:"multimedia",class:"blockyBlue"},{label:"Suggestion Cips",description:"Send users mulltiple suggestions",nextNodeHints:"Next should be User Input",type:"selectorSuggestionChips",subtype:"suggestionchip",image:"time.svg",class:"blockyBlue"},{label:"Carousel Cips",description:"Send user multiple card options",nextNodeHints:"Next should be User Input",type:"selectorCarouselChips",subtype:"carousel",image:"error.svg",class:"blockyBlue"}]},receive:{title:"Bot Recevies",elements:[{label:"User Input",description:"Output edges from this nodes are intents",nextNodeHints:"Next should be either Bot Send or Actions nodes",type:"selectorUserInput",image:"eye.svg",subtype:"userinput",class:"blockyGreen"}]},action:{title:"Bot Actions",elements:[{label:"Start",description:"Initialize a conversation",nextNodeHints:"Next node should be either Bot Send or Actions nodes",type:"selectorNodeStart",image:"eye.svg",subtype:"start",class:"blockyGrey"},{label:"To Agent",subtype:"toagent",description:"Transfer current conversation to agent",nextNodeHints:"Next node could be anything",type:"selectorToAgent",image:"action.svg",class:"blockyGrey"},{label:"Api Calling",subtype:"apicalling",description:"GET and POST method allowed. Request and response are json",nextNodeHints:"Next node could be anything",type:"selectorApiCalling",image:"action.svg",class:"blockyGrey"},{label:"Script Node",subtype:"scriptnode",description:"Process input data and set result to output variables",nextNodeHints:"Next node could be anything",type:"selectorScriptNode",image:"action.svg",class:"blockyGrey"},{label:"Close",subtype:"closenode",description:"Close conversation session",nextNodeHints:"This is a final node of the flow",type:"selectorStop",image:"terminate.svg",class:"blockyRed"}]}},R=function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={activeClass:"send",elemetArray:S,elemetOrig:S},s.filterList=s.filterList.bind(Object(p.a)(s)),s}return Object(c.a)(a,[{key:"filterList",value:function(e){console.log("Event:",e.target.value)}},{key:"_handleClick",value:function(e){this.setState({activeClass:e.target.id})}},{key:"onDragStart",value:function(e,t,a){e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.setData("element",a),e.dataTransfer.effectAllowed="move"}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{id:"leftcard",children:[Object(u.jsx)("div",{id:"closecard",children:Object(u.jsx)("img",{src:"assets/closeleft.svg",alt:"close"})}),Object(u.jsx)("p",{id:"header",children:"Blocks"}),Object(u.jsxs)("div",{id:"search",children:[Object(u.jsx)("img",{src:"assets/search.svg",alt:"search"}),Object(u.jsx)("input",{type:"text",placeholder:"Search blocks",onChange:this.filterList})]}),Object(u.jsx)("div",{id:"subnav",children:Object.keys(this.state.elemetArray).map((function(t,a){return Object(u.jsx)("div",{id:t,className:e.state.activeClass===t?"navactive side":"navdisabled side",onClick:e._handleClick.bind(e),children:e.state.elemetArray[t].title},"menu_"+a)}))}),Object.keys(this.state.elemetArray).map((function(t,a){return Object(u.jsx)("div",{id:"blocklist".concat(++a," ").concat(t),className:e.state.activeClass===t?"blocklist":"hidden blocklist",children:e.state.elemetArray[t].elements.map((function(t,s){return Object(u.jsxs)("div",{className:"blockelem create-flowy noselect",onDragStart:function(a){return e.onDragStart(a,t.type,JSON.stringify(t))},draggable:!0,children:[Object(u.jsx)("div",{className:"grabme",children:Object(u.jsx)("img",{src:"assets/grabme.svg",alt:"grabme"})}),Object(u.jsxs)("div",{className:"blockin",children:[Object(u.jsxs)("div",{className:"blockico",children:[Object(u.jsx)("span",{}),Object(u.jsx)("img",{src:"assets/".concat(t.image),alt:t.image})]}),Object(u.jsxs)("div",{className:"blocktext",children:[Object(u.jsx)("p",{className:"blocktitle",children:t.label}),Object(u.jsx)("p",{className:"blockdesc",children:t.description})]})]})]},"menu_compo"+a+"_"+s)}))},"menu_compo"+a)}))]})}}]),a}(s.Component),_=a(7),T=a(15),A=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={element:e.element,updateNodeCb:e.updateNodeCb,nameArray:e.nameArray,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}],theme:"light",language:"javascript",isEditorReady:!1},a.updateText1=a.updateText1.bind(Object(p.a)(a)),a}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.state.element||(this.setState({element:e.element,nameArray:e.nameArray,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextProps",e))}},{key:"componentWillUpdate",value:function(e,t){e.element&&this.state.element&&e.element.id!==this.state.element.id&&this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextPropswill",e,t,this.state)}},{key:"updateText1",value:function(e,t,a){return this.state.element?(this.setState({element:t}),this.state.updateNodeCb(e,t,a)):console.log("empty",this.props),this.setState({element:null}),!0}},{key:"render",value:function(){var e=this;if(this.state.element&&this.state.element.data){if(this.state.element&&"edge"===this.state.element.data.type){if("intent"===this.state.element.data.subtype){var t=Object(s.lazy)((function(){return a(49)("./".concat(e.state.element.data.subtype,"edge"))}));return Object(u.jsx)(s.Suspense,{fallback:Object(u.jsx)("div",{children:"Loading..."}),children:Object(u.jsx)(t,{element:this.state.element,updateNodeCb:this.updateText1})})}return Object(u.jsx)(T.default,{element:this.state.element,updateNodeCb:this.updateText1})}var n=Object(s.lazy)((function(){return a(50)("./".concat(e.state.element.data.subtype))}));return Object(u.jsx)(s.Suspense,{fallback:Object(u.jsx)("div",{children:"Loading..."}),children:Object(u.jsx)(n,{element:this.state.element,nameArray:this.state.nameArray,updateNodeCb:this.updateText1})})}return Object(u.jsx)(u.Fragment,{})}}]),n}(s.Component),I=a(60),F=a(61),U=function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={configUpdate:e.configUpdate},s}return Object(c.a)(a,[{key:"_download",value:function(e){this.state.configUpdate(e)}},{key:"handleFileRead",value:function(e){var t=e.target.result;this.state.configUpdate(JSON.parse(t)),this.props.closePopup()}},{key:"handleFileChosen",value:function(e){var t=e.target.files[0],a=new FileReader;a.onload=this.handleFileRead.bind(this),a.readAsText(t)}},{key:"render",value:function(){return Object(u.jsx)("div",{className:"popup",children:Object(u.jsx)("div",{className:"popup_inner",children:Object(u.jsx)("div",{class:"react-confirm-alert",children:Object(u.jsxs)("div",{class:"react-confirm-alert-body",children:[Object(u.jsx)("h1",{children:"Import file"}),Object(u.jsxs)(I.a,{children:[Object(u.jsxs)(I.a.Group,{controlId:"formBasicEmail",children:[Object(u.jsx)(I.a.Label,{className:"inputlabel",children:"Upload File"}),Object(u.jsx)(I.a.Control,{className:"dropme",type:"file",accept:".json",placeholder:"Upload Your file",onChange:this.handleFileChosen.bind(this)})]}),Object(u.jsx)("div",{class:"react-confirm-alert-button-group",children:Object(u.jsx)(F.a,{variant:"primary",type:"button",onClick:this.props.closePopup,children:"Close"})})]})]})})})})}}]),a}(n.a.Component),D=function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={updateNodeCb:e.publishClick,configUpdate:e.configUpdate,showPopup:!1},s}return Object(c.a)(a,[{key:"_download",value:function(e){return this.state.updateNodeCb(),!0}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"render",value:function(){return Object(u.jsxs)("div",{id:"navigation",children:[Object(u.jsx)("div",{id:"leftside",children:Object(u.jsxs)("div",{id:"details",children:[Object(u.jsx)("div",{id:"back",children:Object(u.jsx)("img",{src:"assets/arrow.svg",alt:"revskill10"})}),Object(u.jsxs)("div",{id:"names",children:[Object(u.jsx)("p",{id:"title",children:"BOT Designer"}),Object(u.jsx)("p",{id:"subtitle",children:"Drag and drop designer"})]})]})}),Object(u.jsxs)("div",{id:"centerswitch",children:[Object(u.jsx)("div",{id:"leftswitch",children:"Insurence Sales"}),Object(u.jsx)("div",{id:"rightswitch",children:"Version 1"})]}),Object(u.jsxs)("div",{id:"buttonsright",children:[Object(u.jsx)("button",{id:"discard1",onClick:this.togglePopup.bind(this),children:"Upload File"}),Object(u.jsx)("div",{id:"publish",onClick:this._download.bind(this),children:"Publish for testing"})]}),this.state.showPopup?Object(u.jsx)(U,{text:"Close Me",configUpdate:this.state.configUpdate,closePopup:this.togglePopup.bind(this)}):null]})}}]),a}(s.Component),B=a(12),E=a.n(B),P=a(19),L=(a(30),[{id:"dndnode_0",type:"selectorNodeStart",position:{x:210,y:60},label:"Start",data:{label:"Start",description:"Next node should be either Bot Send or Actions nodes",subtype:"start",type:"node",image:"eye.svg",class:"blockyGrey",var_name:"start"}}]),H=w,M=1,G=0,V=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"edge_".concat(e?++G:G)},W={name:new Map([[L[0].data.var_name,L[0].id]]),id:new Map([[L[0].id,L[0].data.var_name]])},J=function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={nodeName:null,reactFlowInstance:null,state:{element:null},elements:L,NameArray:W,reactFlowWrapper:n.a.createRef()},s}return Object(c.a)(a,[{key:"onConnect",value:function(e){console.log("Connecting ",e.source," with node ",e.target);for(var t,a,s=!1,n=0;n<this.state.elements.length;n++){var i=this.state.elements[n];i.id===e.source&&"selectorUserInput"===i.type&&(console.log("Source node is user input node hence outputs are intents",i),s=!0),i.id===e.target&&(a=i),i.id===e.source&&(t=i)}var o={type:"smoothstep",arrowHeadType:"arrowclosed"};if(console.log("destinationcalled"),a&&t?(a.position.y<t.position.y&&a.position.x>t.position.x&&(o={type:"step",style:{stroke:"#f6ab6c"},animated:!0,arrowHeadType:"arrowclosed"}),console.log("destination",a,"source",t)):console.log("destinationcalledothing"),s){var l=""+V(),c="Intent Name "+l,r="intent_"+l;o.style={stroke:"blue"},this.setState({elements:Object(b.f)(Object(_.a)(Object(_.a)({},e),{},{animated:!1,label:c,data:{label:c,type:"edge",subtype:"intent"},id:r,arrowHeadType:"arrow"},o),this.state.elements)})}else{var d="flow_"+(""+V());this.setState({elements:Object(b.f)(Object(_.a)(Object(_.a)({},e),{},{animated:!1,label:"",data:{label:"",type:"edge",subtype:"Normal"},id:d,arrowHeadType:"arrow"},o),this.state.elements)})}}},{key:"onElementsRemove",value:function(e){console.log("remove",e),"selectorNodeStart"!==e[0].type?this.setState({elements:Object(b.h)(e,this.state.elements)}):Object(P.confirmAlert)({title:"Alert",message:"You Can't remove start node.",buttons:[{label:"Ok"}]})}},{key:"onLoad",value:function(e){console.log("load"),this.resumeLoadContent(),this.setState({reactFlowInstance:e}),e.fitView()}},{key:"resumeLoadContent",value:function(){var e=this;E.a.get("readLater")?Object(P.confirmAlert)({title:"Confirm to Resume",message:"Do you want to resume work from last drafted project.",buttons:[{label:"Yes",onClick:function(){e.setState({elements:E.a.get("readLater")});var t=new Map,a=new Map;E.a.get("readLater").map((function(e,s){return a.set(e.id,e.data.var_name),t.set(e.data.var_name,e.id),!0})),e.setState({NameArray:{name:t,id:a}}),M=E.a.get("node_id"),G=E.a.get("edge_id"),console.log(M,G),e.callIntervalFunc()}},{label:"No",onClick:function(){M=1,G=0,e.callIntervalFunc()}}]}):this.callIntervalFunc()}},{key:"callIntervalFunc",value:function(){var e=this;this.timer=setInterval((function(){E.a.set("readLater",e.state.elements),E.a.set("node_id",M),E.a.set("edge_id",G),console.log(123,M,G)}),5e3)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}},{key:"onNodeDragStop",value:function(e,t){}},{key:"onDrop",value:function(e){e.preventDefault(),console.log("Element drop: ",this);var t=this.state.reactFlowWrapper.current.getBoundingClientRect(),a=e.dataTransfer.getData("application/reactflow"),s=JSON.parse(e.dataTransfer.getData("element")),n=this.state.reactFlowInstance.project({x:e.clientX-t.left,y:e.clientY-t.top});console.log("Element created: ",s);var i={id:"dndnode_".concat(M++),type:a,position:n,label:"".concat(s.label),data:{label:"".concat(s.label),description:"".concat(s.nextNodeHints),subtype:"".concat(s.subtype||""),type:"node",image:s.image,class:s.class}};console.log("New node: ",i,e.dataTransfer),this.setState({elements:this.state.elements.concat(i)})}},{key:"clickHandleCode",value:function(e,t){if(document.getElementsByClassName("selectedblock").length)for(var a=0,s=Array.from(document.getElementsByClassName("selectedblock"));a<s.length;a++){s[a].classList.remove("selectedblock")}console.log("called",e.target.className),e.target.closest(".blockelem")&&e.target.closest(".blockelem").classList.add("selectedblock"),this.setState({element:t})}},{key:"onElementClick",value:function(e,t){var a=this;document.getElementsByClassName("editMark").length>0?Object(P.confirmAlert)({title:"Confirm Message",message:"Proceed Without Saving?.",buttons:[{label:"Yes",onClick:function(){a.clickHandleCode(e,t)}},{label:"No",onClick:function(){return!1}}]}):this.clickHandleCode(e,t)}},{key:"onSaveAndPublishClick",value:function(e){var t=document.createElement("a"),a=new Blob([JSON.stringify(this.state.reactFlowInstance.toObject().elements)],{type:"application/json"});t.href=URL.createObjectURL(a),t.download="userFile.json",document.body.appendChild(t),t.click()}},{key:"updateEdgeText",value:function(e,t,a){console.log("old,newEl,type",t),this.setState({nodeName:t}),this.setState({element:null})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e,t){console.log("debug",this.state.nodeName,t.nodeName),this.state.nodeName!==t.nodeName&&(this.setState({elements:this.state.elements.map((function(e){return e.id===t.nodeName.id&&(e=t.nodeName),e}))}),console.log("debugRunn",this.state.nodeName,t.nodeName))}},{key:"configUpdate",value:function(e){this.setState({elements:e}),M=1,G=0;var t=new Map,a=new Map;e.map((function(e,s){console.log(e.data.type,e.id);var n=e.id.split("_");return a.set(e.id,e.data.var_name),t.set(e.data.var_name,e.id),"node"===e.data.type?M<=n[n.length-1]&&(M=parseInt(n[n.length-1])+1):G<n[n.length-1]&&(G=parseInt(n[n.length-1])),!0})),this.setState({NameArray:{name:t,id:a}}),console.log(M,G)}},{key:"render",value:function(){return Object(u.jsxs)(b.e,{children:[Object(u.jsx)(D,{publishClick:this.onSaveAndPublishClick.bind(this),configUpdate:this.configUpdate.bind(this)}),Object(u.jsx)(A,{element:this.state.element,nameArray:this.state.NameArray,updateNodeCb:this.updateEdgeText.bind(this)}),Object(u.jsx)("div",{className:"sectionLeft dndflow reactflow-wrapper nested",ref:this.state.reactFlowWrapper,children:Object(u.jsxs)(b.g,{elements:this.state.elements,onConnect:this.onConnect.bind(this),onElementsRemove:this.onElementsRemove.bind(this),onLoad:this.onLoad.bind(this),onDrop:this.onDrop.bind(this),onDragOver:this.onDragOver.bind(this),deleteKeyCode:46,snapToGrid:!0,snapGrid:[30,30],onElementClick:this.onElementClick.bind(this),defaultZoom:1.5,onNodeDragStop:this.onNodeDragStop.bind(this),nodeTypes:H,children:[Object(u.jsx)(b.d,{nodeStrokeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"input"===e.type?"#0041d0":"output"===e.type?"#ff0072":"default"===e.type?"#1a192b":"selectorInput"===e.type?"#0041d0":"selectorStop"===e.type?"#ff0072":"selectorNodeStart"===e.type?"#1a192b":"#eee"},nodeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"#fff"},nodeBorderRadius:2}),Object(u.jsx)(b.b,{}),Object(u.jsx)(b.a,{color:"#aaa",gap:16})]})})]})}}]),a}(s.Component),Y=(a(56),a(57),function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(R,{}),Object(u.jsx)(J,{})]})}}]),a}(n.a.Component)),z=function(e){e&&e instanceof Function&&a.e(14).then(a.bind(null,62)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),i(e),o(e)}))};o.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(Y,{})}),document.getElementById("root")),z()}},[[58,12,13]]]);
//# sourceMappingURL=main.eeb508aa.chunk.js.map