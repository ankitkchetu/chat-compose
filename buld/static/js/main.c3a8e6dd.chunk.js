(this.webpackJsonpfinalflow=this.webpackJsonpfinalflow||[]).push([[10],{19:function(e,t,s){"use strict";s.r(t),s.d(t,"EdgeProp",(function(){return b}));var a=s(7),i=s(18),n=s(8),o=s(9),l=s(12),c=s(11),r=s(10),d=s(0),p=s(1),b=function(e){Object(c.a)(s,e);var t=Object(r.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).state={element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}],theme:"light",language:"javascript",isEditorReady:!1},a.updateText1=a.updateText1.bind(Object(l.a)(a)),a}return Object(o.a)(s,[{key:"componentWillReceiveProps",value:function(e){this.state.element||(this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextProps",e))}},{key:"componentWillUpdate",value:function(e,t){e.element&&this.state.element&&e.element.id!==this.state.element.id&&this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextPropswill",e,t,this.state)}},{key:"handleInputChange",value:function(e,t){var s=e.target,n=s.name,o=s.value,l=Object(i.a)(this.state.rowChip);if(l[t][n]=o,this.setState({rowChip:l}),"suggestionchip"===this.state.element.data.subtype||"carousel"===this.state.element.data.subtype){var c={rowChip:l},r=Object.assign({},this.state.element.data,c);this.setState({element:Object(a.a)(Object(a.a)({},this.state.element),{},{data:Object(a.a)({},r)})})}}},{key:"handleRemoveClick",value:function(e){var t=Object(i.a)(this.state.rowChip);t.splice(e,1),this.setState({rowChip:t})}},{key:"handleAddClick",value:function(){this.setState({rowChip:[].concat(Object(i.a)(this.state.rowChip),[{image:"",text:"",description:""}])})}},{key:"_handleClick",value:function(e){this.setState({clicked:e.target.id})}},{key:"_handleClickClose",value:function(e){console.log("clled"),this.setState({clicked:"dataprop",element:null})}},{key:"handlerChange",value:function(e){if("id_label"===e.target.id)this.setState({element:Object(a.a)(Object(a.a)({},this.state.element),{},{label:e.target.value,data:Object(a.a)(Object(a.a)({},this.state.element.data),{},{label:e.target.value})})});else{var t={};t[e.target.id]=e.target.value;var s=Object.assign({},this.state.element.data,t);this.setState({element:Object(a.a)(Object(a.a)({},this.state.element),{},{data:Object(a.a)({},s)})})}}},{key:"updateText1",value:function(e){if(this.state.element){console.log("called"),console.log("inside",this.state.element);var t=this.props.element,s=this.state.element;this.setState({element:s}),this.state.updateNodeCb(t,s,"node"===t.data.type?0:1)}else console.log("empty",this.props);return this.setState({element:null}),!0}},{key:"handleChangeSpace",value:function(e){" "===e.key&&e.preventDefault()}},{key:"handleChange",value:function(e){var t={};t[e.target.id]=e.target.value;var s=Object.assign({},this.state.element.data,t);console.log(s),this.setState({element:Object(a.a)(Object(a.a)({},this.state.element),{},{data:Object(a.a)({},s)})})}},{key:"handleEditorDidMount",value:function(){this.setState({isEditorReady:!0})}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{id:"propwrap",className:this.state.element&&this.state.element.data?"itson":"",children:Object(p.jsxs)("div",{id:"properties",className:this.state.element&&this.state.element.data?"expanded":"",children:[Object(p.jsx)("div",{id:"close",onClick:this._handleClickClose.bind(this),children:Object(p.jsx)("img",{src:"assets/close.svg",alt:"close"})}),Object(p.jsx)("p",{id:"header2",children:"Properties"}),Object(p.jsxs)("div",{id:"propswitch",children:[Object(p.jsx)("div",{id:"dataprop",className:"dataprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Data"}),Object(p.jsx)("div",{id:"alertprop",className:"alertprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Alerts"}),Object(p.jsx)("div",{id:"logsprop",className:"logsprop"===this.state.clicked?"navactive side":"navdisabled side",onClick:this._handleClick.bind(this),children:"Logs"})]}),Object(p.jsxs)("div",{className:"dataprop"===this.state.clicked?"proplist":"proplist hidden",children:[Object(p.jsx)("p",{className:"inputlabel",children:"Name"}),Object(p.jsx)("input",{className:"dropme",id:"id_label",type:"text",value:this.state.element&&this.state.element.data&&this.state.element.data.label||"",onChange:this.handlerChange.bind(this)}),Object(p.jsx)("p",{className:"inputlabel",children:"Edge Type"}),Object(p.jsxs)("select",{className:"dropme",id:"edgeType",value:this.state.element&&this.state.element.data&&this.state.element.data.edgeType||"Valueset",onChange:this.handleChange.bind(this),children:[Object(p.jsx)("option",{value:"Valueset",children:"Valueset"}),Object(p.jsx)("option",{value:"Comparison",children:"Comparison"})]}),e.state.element&&e.state.element.data&&"Comparison"===e.state.element.data.edgeType?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"inputlabel",children:"Comparison Type"}),Object(p.jsxs)("select",{className:"dropme",id:"comparisonOperator",value:e.state.element&&e.state.element.data&&e.state.element.data.comparisonOperator||"==",onChange:e.handleChange.bind(e),children:[Object(p.jsx)("option",{value:"<=",children:"<="}),Object(p.jsx)("option",{value:"==",children:"=="}),Object(p.jsx)("option",{value:"!=",children:"!="}),Object(p.jsx)("option",{value:"=>",children:"=>"}),Object(p.jsx)("option",{value:">",children:">"}),Object(p.jsx)("option",{value:"<",children:"<"})]}),Object(p.jsx)("p",{className:"inputlabel",children:"Comparison Value"}),Object(p.jsx)("input",{className:"dropme",id:"comparisonValue",type:"text",value:e.state.element&&e.state.element.data&&e.state.element.data.comparisonValue||"",onChange:e.handlerChange.bind(e)})]}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsx)("div",{className:"alertprop"===this.state.clicked?"proplist":"proplist hidden",children:Object(p.jsx)("div",{className:"checkus",children:Object(p.jsx)("p",{children:"Development inprogress"})})}),Object(p.jsx)("div",{className:"logsprop"===this.state.clicked?"proplist":"proplist hidden",children:Object(p.jsx)("div",{className:"checkus",children:Object(p.jsx)("p",{children:"Development inprogress"})})}),Object(p.jsx)("div",{id:"divisionthing"}),Object(p.jsx)("div",{id:"Saveblock",onClick:this.updateText1.bind(this),children:"Save"})]})})}}]),s}(d.Component);t.default=b},43:function(e,t,s){},47:function(e,t,s){var a={"./apicalling":[29,0],"./apicalling.js":[29,0],"./carousel":[30,1],"./carousel.js":[30,1],"./closenode":[31,2],"./closenode.js":[31,2],"./edge":[19],"./edge.js":[19],"./multimedia":[32,3],"./multimedia.js":[32,3],"./scriptnode":[33,4],"./scriptnode.js":[33,4],"./start":[34,5],"./start.js":[34,5],"./suggestionchip":[35,6],"./suggestionchip.js":[35,6],"./text":[36,7],"./text.js":[36,7],"./toagent":[37,8],"./toagent.js":[37,8],"./userinput":[38,9],"./userinput.js":[38,9]};function i(e){if(!s.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return Promise.all(t.slice(1).map(s.e)).then((function(){return s(i)}))}i.keys=function(){return Object.keys(a)},i.id=47,e.exports=i},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(14),o=s.n(n),l=(s(43),s(8)),c=s(9),r=s(11),d=s(10),p=s(12),b=s(2),u=s(1),j=function(e){return Object(u.jsx)("div",{className:e.data.class||e.displayColor?e.displayColor:"",children:Object(u.jsxs)("div",{className:"blockyleft",children:[Object(u.jsx)("img",{src:"assets/".concat(e.data.image.split(".").join("blue.")),alt:e.data.image}),Object(u.jsx)("p",{className:"blockyname",children:e.data.label})]})})},h=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"blockydiv"}),Object(u.jsx)("div",{className:"blockyinfo",children:e.data.description})]})},m=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},g=function(e){var t=e.data,s="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(s="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(s),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},O=function(e){var t=e.data,s="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(s="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(s),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},y=function(e){var t=e.data,s="";return("multimedia"===t.subtype&&""!==t.mediaUrl||"suggestionchip"===t.subtype&&(!t.rowChip||t.rowChip.length<0||""===t.rowChip[0].text||""===t.rowChip[0].description))&&(s="red"),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput ".concat(s),children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},v=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},x=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",position:"bottom",style:{borderRadius:0}})]})})},f=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},k=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},C=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",id:"a",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyBlue"}),Object(u.jsx)(h,{data:t}),Object(u.jsx)(b.c,{type:"source",id:"b",position:"bottom",style:{borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"c",position:"right",style:{top:"50%",borderRadius:0}}),Object(u.jsx)(b.c,{type:"target",id:"d",position:"left",style:{top:"50%",borderRadius:0}})]})})},N=function(e){var t=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"blockelem noselect block botInput",children:[Object(u.jsx)(b.c,{type:"target",position:"top",style:{borderRadius:0}}),Object(u.jsx)(j,{data:t,displayColor:"blockyRed"}),Object(u.jsx)(h,{data:t})]})})},w={selectorText:Object(a.memo)(m),selectorMedia:Object(a.memo)(g),selectorSuggestionChips:Object(a.memo)(O),selectorCarouselChips:Object(a.memo)(y),selectorUserInput:Object(a.memo)(v),selectorNodeStart:Object(a.memo)(x),selectorToAgent:Object(a.memo)(f),selectorApiCalling:Object(a.memo)(k),selectorScriptNode:Object(a.memo)(C),selectorStop:Object(a.memo)(N)},S={send:{title:"Bot Send",elements:[{label:"Text",description:"Send user a text message",nextNodeHints:"Next should be User Input",type:"selectorText",image:"eye.svg",subtype:"text",class:"blockyBlue"},{label:"Multimedia",description:"Send user a multimedia link",nextNodeHints:"Next should be User Input",type:"selectorMedia",image:"database.svg",subtype:"multimedia",class:"blockyBlue"},{label:"Suggestion Cips",description:"Send users mulltiple suggestions",nextNodeHints:"Next should be User Input",type:"selectorSuggestionChips",subtype:"suggestionchip",image:"time.svg",class:"blockyBlue"},{label:"Carousel Cips",description:"Send user multiple card options",nextNodeHints:"Next should be User Input",type:"selectorCarouselChips",subtype:"carousel",image:"error.svg",class:"blockyBlue"}]},receive:{title:"Bot Recevies",elements:[{label:"User Input",description:"Output edges from this nodes are intents",nextNodeHints:"Next should be either Bot Send or Actions nodes",type:"selectorUserInput",image:"eye.svg",subtype:"userinput",class:"blockyGreen"}]},action:{title:"Bot Actions",elements:[{label:"Start",description:"Initialize a conversation",nextNodeHints:"Next node should be either Bot Send or Actions nodes",type:"selectorNodeStart",image:"eye.svg",subtype:"start",class:"blockyGrey"},{label:"To Agent",subtype:"toagent",description:"Transfer current conversation to agent",nextNodeHints:"Next node could be anything",type:"selectorToAgent",image:"action.svg",class:"blockyGrey"},{label:"Api Calling",subtype:"apicalling",description:"GET and POST method allowed. Request and response are json",nextNodeHints:"Next node could be anything",type:"selectorApiCalling",image:"action.svg",class:"blockyGrey"},{label:"Script Node",subtype:"scriptnode",description:"Process input data and set result to output variables",nextNodeHints:"Next node could be anything",type:"selectorScriptNode",image:"action.svg",class:"blockyGrey"},{label:"Close",subtype:"closenode",description:"Close conversation session",nextNodeHints:"This is a final node of the flow",type:"selectorStop",image:"terminate.svg",class:"blockyRed"}]}},R=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={activeClass:"send",elemetArray:S,elemetOrig:S},a.filterList=a.filterList.bind(Object(p.a)(a)),a}return Object(c.a)(s,[{key:"filterList",value:function(e){console.log("Event:",e.target.value)}},{key:"_handleClick",value:function(e){this.setState({activeClass:e.target.id})}},{key:"onDragStart",value:function(e,t,s){e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.setData("element",s),e.dataTransfer.effectAllowed="move"}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{id:"leftcard",children:[Object(u.jsx)("div",{id:"closecard",children:Object(u.jsx)("img",{src:"assets/closeleft.svg",alt:"close"})}),Object(u.jsx)("p",{id:"header",children:"Blocks"}),Object(u.jsxs)("div",{id:"search",children:[Object(u.jsx)("img",{src:"assets/search.svg",alt:"search"}),Object(u.jsx)("input",{type:"text",placeholder:"Search blocks",onChange:this.filterList})]}),Object(u.jsx)("div",{id:"subnav",children:Object.keys(this.state.elemetArray).map((function(t,s){return Object(u.jsx)("div",{id:t,className:e.state.activeClass===t?"navactive side":"navdisabled side",onClick:e._handleClick.bind(e),children:e.state.elemetArray[t].title},"menu_"+s)}))}),Object.keys(this.state.elemetArray).map((function(t,s){return Object(u.jsx)("div",{id:"blocklist".concat(++s," ").concat(t),className:e.state.activeClass===t?"blocklist":"hidden blocklist",children:e.state.elemetArray[t].elements.map((function(t,a){return Object(u.jsxs)("div",{className:"blockelem create-flowy noselect",onDragStart:function(s){return e.onDragStart(s,t.type,JSON.stringify(t))},draggable:!0,children:[Object(u.jsx)("div",{className:"grabme",children:Object(u.jsx)("img",{src:"assets/grabme.svg",alt:"grabme"})}),Object(u.jsxs)("div",{className:"blockin",children:[Object(u.jsxs)("div",{className:"blockico",children:[Object(u.jsx)("span",{}),Object(u.jsx)("img",{src:"assets/".concat(t.image),alt:t.image})]}),Object(u.jsxs)("div",{className:"blocktext",children:[Object(u.jsx)("p",{className:"blocktitle",children:t.label}),Object(u.jsx)("p",{className:"blockdesc",children:t.description})]})]})]},"menu_compo"+s+"_"+a)}))},"menu_compo"+s)}))]})}}]),s}(a.Component),T=s(7),F=s(19),I=function(e){Object(r.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(l.a)(this,i),(s=t.call(this,e)).state={element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}],theme:"light",language:"javascript",isEditorReady:!1},s.updateText1=s.updateText1.bind(Object(p.a)(s)),s}return Object(c.a)(i,[{key:"componentWillReceiveProps",value:function(e){this.state.element||(this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextProps",e))}},{key:"componentWillUpdate",value:function(e,t){e.element&&this.state.element&&e.element.id!==this.state.element.id&&this.setState({element:e.element,updateNodeCb:e.updateNodeCb,clicked:"dataprop",rowChip:e.element&&e.element.data.rowChip||[{image:"",text:"",description:""}]}),console.log("nextPropswill",e,t,this.state)}},{key:"updateText1",value:function(e,t,s){return this.state.element?(this.setState({element:t}),this.state.updateNodeCb(e,t,s)):console.log("empty",this.props),this.setState({element:null}),!0}},{key:"render",value:function(){var e=this;if(this.state.element&&this.state.element.data){if(this.state.element&&"edge"===this.state.element.data.type)return Object(u.jsx)(F.default,{element:this.state.element,updateNodeCb:this.updateText1});var t=Object(a.lazy)((function(){return s(47)("./".concat(e.state.element.data.subtype))}));return Object(u.jsx)(a.Suspense,{fallback:Object(u.jsx)("div",{children:"Loading..."}),children:Object(u.jsx)(t,{element:this.state.element,updateNodeCb:this.updateText1})})}return Object(u.jsx)(u.Fragment,{})}}]),i}(a.Component),U=s(58),D=s(59),_=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={configUpdate:e.configUpdate},a}return Object(c.a)(s,[{key:"_download",value:function(e){this.state.configUpdate(e)}},{key:"handleFileRead",value:function(e){var t=e.target.result;this.state.configUpdate(JSON.parse(t)),this.props.closePopup()}},{key:"handleFileChosen",value:function(e){var t=e.target.files[0],s=new FileReader;s.onload=this.handleFileRead.bind(this),s.readAsText(t)}},{key:"render",value:function(){return Object(u.jsx)("div",{className:"popup",children:Object(u.jsx)("div",{className:"popup_inner",children:Object(u.jsx)("div",{class:"react-confirm-alert",children:Object(u.jsxs)("div",{class:"react-confirm-alert-body",children:[Object(u.jsx)("h1",{children:"Import file"}),Object(u.jsxs)(U.a,{children:[Object(u.jsxs)(U.a.Group,{controlId:"formBasicEmail",children:[Object(u.jsx)(U.a.Label,{className:"inputlabel",children:"Upload File"}),Object(u.jsx)(U.a.Control,{className:"dropme",type:"file",accept:".json",placeholder:"Upload Your file",onChange:this.handleFileChosen.bind(this)})]}),Object(u.jsx)("div",{class:"react-confirm-alert-button-group",children:Object(u.jsx)(D.a,{variant:"primary",type:"button",onClick:this.props.closePopup,children:"Close"})})]})]})})})})}}]),s}(i.a.Component),B=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={updateNodeCb:e.publishClick,configUpdate:e.configUpdate,showPopup:!1},a}return Object(c.a)(s,[{key:"_download",value:function(e){return this.state.updateNodeCb(),!0}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"render",value:function(){return Object(u.jsxs)("div",{id:"navigation",children:[Object(u.jsx)("div",{id:"leftside",children:Object(u.jsxs)("div",{id:"details",children:[Object(u.jsx)("div",{id:"back",children:Object(u.jsx)("img",{src:"assets/arrow.svg",alt:"revskill10"})}),Object(u.jsxs)("div",{id:"names",children:[Object(u.jsx)("p",{id:"title",children:"BOT Designer"}),Object(u.jsx)("p",{id:"subtitle",children:"Drag and drop designer"})]})]})}),Object(u.jsxs)("div",{id:"centerswitch",children:[Object(u.jsx)("div",{id:"leftswitch",children:"Insurence Sales"}),Object(u.jsx)("div",{id:"rightswitch",children:"Version 1"})]}),Object(u.jsxs)("div",{id:"buttonsright",children:[Object(u.jsx)("button",{id:"discard1",onClick:this.togglePopup.bind(this),children:"Upload File"}),Object(u.jsx)("div",{id:"publish",onClick:this._download.bind(this),children:"Publish for testing"})]}),this.state.showPopup?Object(u.jsx)(_,{text:"Close Me",configUpdate:this.state.configUpdate,closePopup:this.togglePopup.bind(this)}):null]})}}]),s}(a.Component),E=s(13),P=s.n(E),A=s(25),L=(s(53),[{id:"dndnode_0",type:"selectorNodeStart",position:{x:210,y:60},label:"Start",data:{label:"Start",description:"Next node should be either Bot Send or Actions nodes",subtype:"start",type:"node",image:"eye.svg",class:"blockyGrey"}}]),H=w,G=1,M=0,V=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"edge_".concat(e?++M:M)},W=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={nodeName:null,reactFlowInstance:null,state:{element:null},elements:L,reactFlowWrapper:i.a.createRef()},a}return Object(c.a)(s,[{key:"onConnect",value:function(e){console.log("Connecting ",e.source," with node ",e.target);for(var t=!1,s=0;s<this.state.elements.length;s++){var a=this.state.elements[s];a.id===e.source&&"selectorUserInput"===a.type&&(console.log("Source node is user input node hence outputs are intents",a),t=!0)}if(t){var i=""+V(),n="Intent Name "+i,o="intent_"+i;this.setState({elements:Object(b.f)(Object(T.a)(Object(T.a)({},e),{},{type:"smoothstep",animated:!1,label:n,data:{label:n,type:"edge"},id:o,arrowHeadType:"arrow"}),this.state.elements)})}else{var l="flow_"+(""+V());this.setState({elements:Object(b.f)(Object(T.a)(Object(T.a)({},e),{},{type:"smoothstep",animated:!1,label:"",data:{label:"",type:"edge"},id:l,arrowHeadType:"arrow"}),this.state.elements)})}}},{key:"onElementsRemove",value:function(e){console.log("remove",e),"selectorNodeStart"!==e[0].type?this.setState({elements:Object(b.h)(e,this.state.elements)}):Object(A.confirmAlert)({title:"Alert",message:"You Can't remove start node.",buttons:[{label:"Ok"}]})}},{key:"onLoad",value:function(e){console.log("load"),this.resumeLoadContent(),this.setState({reactFlowInstance:e}),e.fitView()}},{key:"resumeLoadContent",value:function(){var e=this;P.a.get("readLater")?Object(A.confirmAlert)({title:"Confirm to Resume",message:"Do you want to resume work from last drafted project.",buttons:[{label:"Yes",onClick:function(){e.setState({elements:P.a.get("readLater")}),G=P.a.get("node_id"),M=P.a.get("edge_id"),console.log(G,M),e.callIntervalFunc()}},{label:"No",onClick:function(){e.callIntervalFunc()}}]}):this.callIntervalFunc()}},{key:"callIntervalFunc",value:function(){var e=this;this.timer=setInterval((function(){P.a.set("readLater",e.state.elements),P.a.set("node_id",G),P.a.set("edge_id",M)}),5e3)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}},{key:"onNodeDragStop",value:function(e,t){}},{key:"onDrop",value:function(e){e.preventDefault(),console.log("Element drop: ",this);var t=this.state.reactFlowWrapper.current.getBoundingClientRect(),s=e.dataTransfer.getData("application/reactflow"),a=JSON.parse(e.dataTransfer.getData("element")),i=this.state.reactFlowInstance.project({x:e.clientX-t.left,y:e.clientY-t.top});console.log("Element created: ",a);var n={id:"dndnode_".concat(G++),type:s,position:i,label:"".concat(a.label),data:{label:"".concat(a.label),description:"".concat(a.nextNodeHints),subtype:"".concat(a.subtype||""),type:"node",image:a.image,class:a.class}};console.log("New node: ",n,e.dataTransfer),this.setState({elements:this.state.elements.concat(n)})}},{key:"onElementClick",value:function(e,t){if(document.getElementsByClassName("selectedblock").length)for(var s=0,a=Array.from(document.getElementsByClassName("selectedblock"));s<a.length;s++){a[s].classList.remove("selectedblock")}console.log("called",t,e.target.parentElement.classList.add("selectedblock")),this.setState({element:t})}},{key:"onSaveAndPublishClick",value:function(e){var t=document.createElement("a"),s=new Blob([JSON.stringify(this.state.reactFlowInstance.toObject().elements)],{type:"application/json"});t.href=URL.createObjectURL(s),t.download="userFile.json",document.body.appendChild(t),t.click()}},{key:"updateEdgeText",value:function(e,t,s){console.log("old,newEl,type",t),this.setState({nodeName:t}),this.setState({element:null})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e,t){console.log("debug",this.state.nodeName,t.nodeName),this.state.nodeName!==t.nodeName&&(this.setState({elements:this.state.elements.map((function(e){return e.id===t.nodeName.id&&(e=t.nodeName),e}))}),console.log("debugRunn",this.state.nodeName,t.nodeName))}},{key:"configUpdate",value:function(e){this.setState({elements:e}),G=1,M=0,e.map((function(e,t){console.log(e.data.type,e.id);var s=e.id.split("_");return"node"===e.data.type?G<s[s.length-1]&&(G=parseInt(s[s.length-1])):M<s[s.length-1]&&(M=parseInt(s[s.length-1])),!0}))}},{key:"render",value:function(){return Object(u.jsxs)(b.e,{children:[Object(u.jsx)(B,{publishClick:this.onSaveAndPublishClick.bind(this),configUpdate:this.configUpdate.bind(this)}),Object(u.jsx)(I,{element:this.state.element,updateNodeCb:this.updateEdgeText.bind(this)}),Object(u.jsx)("div",{className:"sectionLeft dndflow reactflow-wrapper nested",ref:this.state.reactFlowWrapper,children:Object(u.jsxs)(b.g,{elements:this.state.elements,onConnect:this.onConnect.bind(this),onElementsRemove:this.onElementsRemove.bind(this),onLoad:this.onLoad.bind(this),onDrop:this.onDrop.bind(this),onDragOver:this.onDragOver.bind(this),deleteKeyCode:46,snapToGrid:!0,snapGrid:[30,30],onElementClick:this.onElementClick.bind(this),defaultZoom:1.5,onNodeDragStop:this.onNodeDragStop.bind(this),nodeTypes:H,children:[Object(u.jsx)(b.d,{nodeStrokeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"input"===e.type?"#0041d0":"output"===e.type?"#ff0072":"default"===e.type?"#1a192b":"selectorInput"===e.type?"#0041d0":"selectorStop"===e.type?"#ff0072":"selectorNodeStart"===e.type?"#1a192b":"#eee"},nodeColor:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.background)?e.style.background:"#fff"},nodeBorderRadius:2}),Object(u.jsx)(b.b,{}),Object(u.jsx)(b.a,{color:"#aaa",gap:16})]})})]})}}]),s}(a.Component),J=(s(54),s(55),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(R,{}),Object(u.jsx)(W,{})]})}}]),s}(i.a.Component)),Y=function(e){e&&e instanceof Function&&s.e(13).then(s.bind(null,60)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,o=t.getTTFB;s(e),a(e),i(e),n(e),o(e)}))};o.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(J,{})}),document.getElementById("root")),Y()}},[[56,11,12]]]);
//# sourceMappingURL=main.c3a8e6dd.chunk.js.map